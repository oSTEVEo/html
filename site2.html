<!doctypehtml><html lang="en"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>Document</title><style>body{background-color:#969696fd;padding:0;margin:0;width:100%;height:100%}#teemp{background-color:salmon;margin:10px}.monitor,.pid_monitor{margin:10px;font-size:2rem;color:gray;text-shadow:2px 4px 3px rgba(0,0,0,.2);font-family:Oswald,sans-serif}.sets{font-size:2rem;margin-left:20px}#fqs,#pids,#temps,#wifi-set{align-self:top-center;padding:15px;padding-top:1px;width:auto;margin:20px;background-color:#fff;border-radius:20px}</style><div id="temps"><div id="temp_monitor"><h2>Температуры:</h2><div class="monitor"id="temp0">Температура 0: -0 C&#176;</div><div class="monitor"id="temp1">Температура 1: -0 C&#176;</div><div class="monitor"id="temp2">Температура 2: -0 C&#176;</div><div class="monitor"id="temp3">Температура 3: -0 C&#176;</div></div><div class="sets"name="set_temp"><select id="temps_form"><option value="0">0 Термодатчик<option value="1">1 Термодатчик<option value="2">2 Термодатчик<option value="3">3 Термодатчик</select> <input name="set temperature"id="set_temp"placeholder="Введите температуру"> <button onclick="set_temp()">Установить</button></div></div><div id="fqs"><div id="fq_monitor"><div class="monitor"id="fq0">Мотор 0: -0 HZ</div><div class="monitor"id="fq1">Мотор 1: -0 HZ</div></div><div class="sets"name="set_fq"><select id="fq_form"><option value="0">0 Мотор<option value="1">1 Мотор</select> <input name="set fq"id="set_fq"placeholder="Введите частоту"> <button onclick="set_fq()">Установить</button></div></div><div id="pids"><table id="pid_monitor"cellpadding="5px"><tr><td><td>kp<td>ki<td>kd<tr><td>Нагреватель 0<td id="pid0_kp">-1<td id="pid0_ki">-1<td id="pid0_kd">-1<tr><td>Нагреватель 1<td id="pid1_kp">-1<td id="pid1_ki">-1<td id="pid1_kd">-1<tr><td>Нагреватель 2<td id="pid2_kp">-1<td id="pid2_ki">-1<td id="pid2_kd">-1<tr><td>Нагреватель 3<td id="pid3_kp">-1<td id="pid3_ki">-1<td id="pid3_kd">-1</table><div class="sets"name="set_pid"><select id="temps_for_pid"><option value="0">0 Нагреватель<option value="1">1 Нагреватель<option value="2">2 Нагреватель<option value="3">3 Нагреватель</select> <select id="pid_form"><option value="0">kp<option value="1">ki<option value="2">kd</select> <input name="set pid"id="set_pid"placeholder="Введите значение"> <button onclick="set_PID()">Установить</button></div></div><div id="wifi-set"><input name="set wifi-name"id="set_wifi_name"placeholder="Введите имя Wi-Fi"> <input name="set wifi-pass"id="set_wifi_pass"placeholder="Введите пароль Wi-Fi"></div><script>var DEBUG = false; var key = 0; function httpGet(theUrl, callback) { console.log(theUrl); var xhr = new XMLHttpRequest(); xhr.open("GET", theUrl, true); xhr.onreadystatechange = function () { if (xhr.readyState == 4 && xhr.status == 200) { callback(xhr.responseText) } }; xhr.send(null) } function get_temp() { var value; httpGet("/get_temp", function (value) { console.log(value); var tmp = JSON.parse(value); document.getElementById("temp0").innerText = `Температура 0 > ${tmp.t0.set + "/" + tmp.t0.current} C°`; document.getElementById("temp1").innerText = `Температура 1 > ${tmp.t1.set + "/" + tmp.t1.current} C°`; document.getElementById("temp2").innerText = `Температура 2 > ${tmp.t2.set + "/" + tmp.t2.current} C°`; document.getElementById("temp3").innerText = `Температура 3 > ${tmp.t3.set + "/" + tmp.t3.current} C°` }) } function get_fq() { if (DEBUG) { value = '{"f0":"0","f1":"0"}' } else { value = httpGet("/get_fq", function (value) { console.log(value); var tmp = JSON.parse(value); document.getElementById("fq0").innerText = `Мотор 0 > ${tmp.fq0} Hz`; document.getElementById("fq1").innerText = `Мотор 1 > ${tmp.fq1} Hz` }); } } function get_PID() { httpGet("/get_PID", function (value) { console.log(value); var tmp = JSON.parse(value); var a = Object.values(tmp); for (var i = 0; i < 4; i += 1) { document.getElementById(`pid${i}_kp`).innerText = a[i].Kp; document.getElementById(`pid${i}_ki`).innerText = a[i].Ki; document.getElementById(`pid${i}_kd`).innerText = a[i].Kd } }) } function set_temp() { var chen_num = document.getElementById("temps_form").value; var value = document.getElementById("set_temp").value; console.log("set temp"); var request = "/set_temp?chenl="; request += chen_num; request += "&temp="; request += value; request += "&key="; request += key; httpGet(request, function (text) { console.log("set_temp reqest-" + text) }) } function set_fq() { var chen_num = document.getElementById("fq_form").value; var frequency = document.getElementById("set_fq").value; console.log("set fq"); var request = "/set_fq?chenl="; request += chen_num; request += "&frequency="; request += frequency; request += "&key="; request += key; httpGet(request, function (text) { console.log("set_fq reqest -" + text) }) } function set_PID() { var chenl = document.getElementById("temps_for_pid").value; console.log("set PID"); var request = "/set_PID?chenl="; request += chenl; request += "&kn="; request += document.getElementById("pid_form").value; request += "&value="; request += document.getElementById("set_pid").value; request += "&key="; request += key; httpGet(request, function (text) { console.log("set_pid reqest -" + text) }) } setInterval(function () { get_temp(); get_fq(); get_PID() }, 1500);</script>